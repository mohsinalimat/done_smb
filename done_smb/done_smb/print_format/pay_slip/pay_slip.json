{
 "align_labels_right": 0,
 "creation": "2021-01-08 16:03:00.593811",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Salary Slip",
 "docstatus": 0,
 "doctype": "Print Format",
 "font": "Default",
 "html": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Document</title>\n\n</head>\n\n<body>\n    <style>\n        th{\n            color: rgb(224, 88, 224);\n            background-color: rgb(245, 229, 142);\n\n        }\n        table{\n            border-collapse: collapse;\n            \n        }\n\n        #sh\n        {\n            border: 1px solid black;\n        }\n        #no{\n            border:none\n        }\n    </style>\n    <h4 style=\"text-align: center;\"><strong><u>Payslip</u></strong></h4>\n    {% set emp_details = frappe.get_doc(\"Employee\", doc.employee.split(':')[0]) %}\n    <table >\n        <tr>\n            <td style=\"width: 100%;border: None;\">\n\n                Company &emsp;&emsp;&emsp; :&nbsp;{{doc.company}}\n                <br><br>\n                Employee No &emsp; :&nbsp;{{doc.employee}}\n                <br><br>\n                Name &emsp;&emsp;&emsp;&emsp;&nbsp; :&nbsp;{{doc.employee_name}}\n                <br><br>\n                Job Title &emsp;&emsp;&emsp;&nbsp; :&nbsp;{{doc.designation}}\n                <br><br>\n            </td>\n            \n        </tr>\n    </table>\n    <table>\n        <tr>\n            <td style=\"width: 30%;border: None;\">\n                Joining Date &nbsp;&nbsp; : &nbsp;{{ emp_details.date_of_joining }}\n               \n            </td>\n            <td style=\"width: 30%;border: None;\">\n                Basic&nbsp;Salary&nbsp;&nbsp;:&nbsp;\n                {{ salary_detail(doc.employee).amount }}\n            </td>\n            <td style=\"width: 40%;border: None;\">\n                Monthly&nbsp;Allowances  &nbsp;&nbsp;:&nbsp;{{ get_allow(doc.salary_structure)}}\n                </td>\n        </tr>\n    </table>\n    <hr style=\"border: 1px solid black;width=100%\">\n    {% set leave = annual_leave_form(doc.employee, 'Sick Leave', doc.start_date, doc.end_date, frappe.utils.now()) %}\n    <table>\n        <tr>\n            <td  style=\"width: 30%;\">\n                Sick&nbsp;Leave&nbsp;Taken&nbsp;:{{sick_leave(doc.employee, doc.start_date, doc.end_date)}}\n            </td>\n            <td style=\"width: 30%;\">\n               Loan&nbsp;Balance&nbsp;:{{ doc.total_loan_repayment }}\n            </td>\n            <td style=\"width:40%\">\n                Leave&nbsp;Balance&nbsp;: {{ leave['balance'] }}\n            </td>\n        </tr>\n\n    </table>\n    <table id=\"sh\">\n                    <tr>\n                        <caption style=\"border: 1px solid black; border-bottom: none; background-color:rgb(245, 229, 142);;\">Days</caption>\n                    <tr>\n                        <th id=\"sh\" style=\"width: 40%;\">Description</th>\n                        <th id=\"sh\" style=\"width: 30%;\">No Of Days</th>\n                        <th id=\"sh\" style=\"width: 30%;\">Amount</th>\n                    </tr>\n                        <tr><td id=\"sh\">\n                            No Of Unpaid Leave Days\n                        </td>\n                        <td id=\"sh\">{{ doc.leave_without_pay }}</td><td id=\"sh\">{{ '%.2f'%(salary_detail(doc.employee).amount/doc.total_working_days * doc.leave_without_pay) }}</td></tr>\n                        <tr><td id=\"sh\">\n                            No Of Settled Working Days\n                        </td>\n                        <td id=\"sh\">{{ doc.total_working_days }}</td><td id=\"sh\">{{ \"%.2f\"%(salary_detail(doc.employee).amount /doc.total_working_days * doc.total_working_days) }}</td></tr>\n                        <tr><td id=\"sh\">\n                            No Of Settled Leave Days\n                        </td>\n                        <td id=\"sh\">{{ leave[\"paid_leaves\"] }}</td><td id=\"sh\">{{ \"%.2f\"%(salary_detail(doc.employee).amount /doc.total_working_days * leave[\"paid_leaves\"]) }}</td></tr>\n                        <tr><td id=\"sh\">\n                            No Of Unsettled Paid Leave Days\n                        </td>\n                        <td id=\"sh\">0</td><td id=\"sh\"></td></tr>\n                        <tr><td id=\"sh\">\n                            No Of Working Days Due\n                        </td>\n                        <td id=\"sh\">\n                            {% set remaining_days = frappe.db.get_list(\"Salary Slip\", filters={'employee':doc.employee}, fields=['end_date'], order_by=\"end_date desc\") %}\n                            {% set remaining_days = frappe.utils.date_diff(frappe.utils.today(), remaining_days[0].end_date) %}\n                            {{ remaining_days }}\n                        </td><td id=\"sh\">{{ \"%.2f\"%(salary_detail(doc.employee).amount /doc.total_working_days * remaining_days) }}</td>\n                        </tr>\n                </table>\n                \n    {% set salary = frappe.get_doc(\"Salary Slip\", doc.name) %}\n    \n    <table id=\"sh\" style=\"margin-top: 10%; width: 100%;\">\n        <tr>\n            <th>\n            </th>\n            <th>Additions</th>\n            <th id=\"sh\" style=\"border-left: none;\"></th>\n            <th></th>\n            <th>Deductions</th>\n            <th></th>\n        </tr>\n        <tr>\n            <th id=\"sh\">Description</th>\n            <th id=\"sh\">Amount</th>\n            <th id=\"sh\">Remarks</th>\n            <th id=\"sh\">Category</th>\n            <th id=\"sh\">Type</th>\n            <th id=\"sh\">Amount</th>\n        </tr>\n        {% for i in salary.earnings %}\n        <tr>\n            <td>{{ i.salary_component }}</td>\n            <td id=\"sh\" >{{ i.amount }}</td>\n            <td id=\"sh\"></td>\n            <td id=\"sh\"></td>\n            <td id=\"sh\"></td>\n            <td id=\"sh\"></td>\n        </tr>\n        {% endfor %}\n        {% for i in salary.deductions %}\n        <tr>\n            <td>{{ i.salary_component }}</td>\n            <td id=\"sh\"></td>\n            <td id=\"sh\"></td>\n            <td id=\"sh\"></td>\n            <td id=\"sh\"></td>\n            <td id=\"sh\">{{ i.amount }}</td>\n        </tr>\n        {% endfor %}\n\n    </table>\n    <table  style=\"width: 100%;\">\n        <tr>\n            <td ><strong> <br><br>Total Additions :</strong>{{ doc.gross_pay }}</td>\n            <td ></td>\n            <td ><strong><br><br>Total Deduction :</strong>{{ doc.total_deduction }}</td>\n        </tr>\n        <tr><td><strong><br><br>Net Salary :</strong>{{ doc.net_pay }}</td></tr>\n        <tr>\n            <td>\n                <strong><br><br>Passport Expiry Date:</strong>\n            </td>\n            <td><strong><br><br>Residency / ID <br>  Expiry Date  :</strong></td>\n        </tr>\n    </table>\n    <br><br>\n\n</body>\n\n</html>",
 "idx": 0,
 "line_breaks": 0,
 "modified": "2021-01-11 17:06:40.059321",
 "modified_by": "Administrator",
 "module": "Done Smb",
 "name": "Pay Slip",
 "owner": "Administrator",
 "print_format_builder": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}
